import{p as y,t as ot,l as S,g as C,v as N,x as it,y as j,z as st,o as E,c as z,F as at,q as ut,a as D,A as L,B as _,C as P,D as lt,E as ct}from"./vendor.bccda1e6.js";import{_ as x}from"./index.136223cb.js";var Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABNBJREFUaEPtmV1oXEUUx//n3g1JRGqL9k1RsFq/6IMgSky8c2YTQyONiojWYumTQrWKSNH6oO1TS1EQFcTiQwsaK4qIbVdod+/M3Y0IteJDwVr1oVYFEfFFwUY2c2TCbrhZNptNduvuQgf2Ze85M+c359w5Z84l9PigHrcflwCqHrTWsoiUmLn8f3q1bR4wxggRlZxz00EQlCowf19smLYAxHF8NxFNA/gUgAKwGsApD5GC+eNiwLQL4GUi2gNgDIA31ENEKZhzIvK5h5mZmZkeHx//uV0wbQEwxpQADDPzgvny+fyNYRhO1MB42w9674RhWIqi6IdWYFoGMMbcBuA0ER1RSk3GcbyViB4HcBTAMWb+0RtYKpXWlMvlSSKaFBFdCTP/yIrIRxWY08uFaQfAswAeAPAaMx81xhwmojVpQ0TkSxH5QGt9tvp/kiQTzrlJAOsroeYfnXPOHQrD8JhS6qtmYFoGaGaRRjKFQuF6IhononsB+N9gSv4ggENKqYSIpN48cwCFQmF3EARPt2rMcvWZ+ao4ju/TWh+r6hpjRkVkYwXIh+d8qvEw/f39Hw4NDf1T/TMN8AqA/HKNWKk8EWmlVFjZvG0iUiSiIjO/W52zWCyuLZfLm4hoE4DxlHfmQi2bze6uBbih+tKt1LBm9Ky17wN4NAXgN29uiMi/HsS/2FrrA+n5isXi7bOzsx5mdyaTWT8yMvJ9XQC/K80YshIZv2uNAOrM+bWIHKjCWGuPi8g9zDzgZesC+LJgJcYtpeOc27MCAD/taWbeYIy5i4gKzjnvnW29BLCLmfcZY54H8GoQBONRFB3vGYByuXzt2NjYeWPMJwAeTGf8rg8hIvpTKXVlHMe3AogBnNFa+1prbnQ9gIi8rbXeHsfxE0T0DhE9qZSaP526HgDACDNPW2sPicjWvr6+VcPDw3/1jAd8vJ84ceKKTCbjj1NordelT7tu98BRZt5krd0sIlNEtFcp9VLPAIjIFq31lDHmLQBPBUGwIYqiBSV3xz1gjPFlRN3MXz0ujTHf+LKbmS+rTZZdC0BEJ5VSdxYKBR0EQYGIppRSW3oGAEA1++4F8KK/ySmljvQMQDX7Wmt9ZeqP0rqXr24NoZ+Y+TpjzDoiOuvvCszM9YrFbgV4nZmfi+N4JxHtJ6JnlFJv9hLAXPY1xuQAbASwlpnrNsY67oHKlXL+RgbgAjMP5nK5/oGBgd+DIPhNKeU7F3VHxwFq80Cl/fKYMeYRAIdFZL/W+oWeAQDwMDN/7PtLADzEHcx8qmcAUtn3FxFZrbW+vNFVteMhFMexj+/7faKqxP9okiRDzrkvALzHzL5NuejoOEDasiRJJqMo+sxau19EdgZB8FAURf4auTyARgrteJZuq9SbzxhzBsBNi2XfJcvpdhjZaI5GAEmSXOOcO09EsVIqu5QtHe/M1Rpord0hIm8A2MHM/h7QcHQjQMF/P3DOXZ3NZn/teoBKJr4AYLpSPviu4HfMfPNSxvvnCzzgnNvejFKrMmEYDi/S3LWVjx37mHlXM+vUhlAzOm2RISLnu9N+slwut2pwcHCCiCZExH+5mchmsyebWWgOwBgz3+lqRqldMszsd3zByOfzt4yOjn7b7Bod/8TUrKGLyV0CaHUHW9X/D9N93V6azvezAAAAAElFTkSuQmCC",Wt="data:image/png;base64,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";const ft=({breakpoints:t,wrapperWidth:e,gutter:r,hasAroundGutter:o,initWidth:n})=>{const s=Object.keys(t).map(f=>Number(f)).sort((f,h)=>f-h);let i=e,a=!1;for(const f of s)if(e<=f){i=f,a=!0;break}if(!a)return n;let u=0;const c=t[i].rowPerView;return o?u=(e-r)/c-r:u=(e-(c-1)*r)/c,Math.floor(u)};function dt(t){const e=y(0),r=y(null);ot(r,i=>{const a=i[0],{width:u}=a.contentRect;e.value=u});const o=S(()=>ft({wrapperWidth:e.value,breakpoints:t.breakpoints,gutter:t.gutter,hasAroundGutter:t.hasAroundGutter,initWidth:t.width})),n=S(()=>{const i=t.hasAroundGutter?-t.gutter:t.gutter,a=(e.value+i)/(o.value+t.gutter);return Math.floor(a)}),s=S(()=>{if(t.align==="left")return 0;if(t.align==="center"){const i=t.hasAroundGutter?t.gutter:-t.gutter,a=n.value*(o.value+t.gutter)+i;return(e.value-a)/2}else{const i=t.hasAroundGutter?t.gutter:-t.gutter,a=n.value*(o.value+t.gutter)+i;return e.value-a}});return{waterfallWrapper:r,wrapperWidth:e,colWidth:o,cols:n,offsetX:s}}function T(t,e){return new RegExp(`(^|\\s)${e}(\\s|$)`).test(t.className)}function H(t,e){if(T(t,e))return;const r=t.className.split(/\s+/);r.push(e),t.className=r.join(" ")}const At=document.createElement("div").style,F=(()=>{const t={standard:"transform",webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform"};for(const e in t){const r=t[e];if(At[r]!==void 0)return e}return!1})();function b(t){return F===!1?!1:F==="standard"?t:F+t.charAt(0).toUpperCase()+t.substr(1)}const W=b("transform"),K=b("animation-duration"),Q=b("animation-delay"),U=b("transition"),G=b("animation-fill-mode");function mt(t,e,r,o,n,s,i){const a=y([]),u=y(0),c=m=>{const d=t.hasAroundGutter?m+1:m;return t.gutter*d+e.value*m+o.value},f=()=>{const m=t.space||t.gutter;a.value=new Array(r.value).fill(t.hasAroundGutter?m:0)},h=m=>{const d=m.firstChild;if(d&&!T(d,t.animationPrefix)){const A=d.style;H(d,t.animationPrefix),H(d,t.animationEffect),K&&(A[K]=`${t.animationDuration/1e3}s`),Q&&(A[Q]=`${t.animationDelay/1e3}s`),G&&(A[G]="both")}};return{wrapperHeight:u,layoutHandle:async(m=!1)=>{if(!n.value)return!1;f();const d=n.value,A=[];if(d.childNodes.forEach(l=>{var g;(l==null?void 0:l.nodeType)===1&&((g=l.classList)==null?void 0:g.contains("waterfall-item"))&&A.push(l)}),A.length===0)return!1;const $=A.map(l=>l.offsetHeight||l.getBoundingClientRect().height),tt=t.posDuration/1e3,R=[];for(let l=0;l<A.length;l++){const g=s?l%r.value:gt(a.value,i),I=a.value[g],et=c(g),rt=$[l],M=A[l];R.push(()=>{const O=M.style;W&&(O[W]=`translate3d(${Math.floor(et)}px,${Math.floor(I)}px,0)`),O.width=`${e.value}px`,O.visibility="visible",!m&&!t.animationCancel&&h(M)});const nt=t.space||t.gutter;a.value[g]+=rt+nt}return u.value=Math.max(...a.value),m?(R.forEach(l=>l()),!0):new Promise(l=>{requestAnimationFrame(()=>{R.forEach(g=>g()),requestAnimationFrame(()=>{for(const g of A){const I=g.style;U&&(I[U]=`transform ${tt}s`)}setTimeout(()=>l(!0),t.posDuration)})})})}}}function gt(t,e){if(t.length===0)return-1;const r=Math.min(...t),o=r+e;let n=-1;for(let s=0;s<t.length;s++)if(t[s]>=r&&t[s]<=o){n=s;break}return n}const ht=typeof window!="undefined"&&window!==null,Y=bt(),yt=Object.prototype.propertyIsEnumerable,Z=Object.getOwnPropertySymbols;function vt(t,...e){return e.map(o=>o.replace(/\[(\w+)\]/g,".$1").split(".").reduce((n,s)=>n&&n[s],t))}function bt(){return ht&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype?("isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),!0):!1}function w(t){return typeof t=="function"||toString.call(t)==="[object Object]"}function wt(t){return typeof t=="object"?t===null:typeof t!="function"}function pt(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}function Et(t,...e){if(!w(t))throw new TypeError("expected the first argument to be an object");if(e.length===0||typeof Symbol!="function"||typeof Z!="function")return t;for(const r of e){const o=Z(r);for(const n of o)yt.call(r,n)&&(t[n]=r[n])}return t}function k(t,...e){let r=0;for(wt(t)&&(t=e[r++]),t||(t={});r<e.length;r++)if(w(e[r])){for(const o of Object.keys(e[r]))pt(o)&&(w(t[o])&&w(e[r][o])?k(t[o],e[r][o]):t[o]=e[r][o]);Et(t,e[r])}return t}function V(t,e){return new Promise((r,o)=>{const n=new Image;n.onload=()=>{r(n)},n.onerror=()=>{o(new Error("Image load error"))},e&&(n.crossOrigin="Anonymous"),n.src=t})}var v;(function(t){t.LOADING="loading",t.LOADED="loaded",t.ERROR="error"})(v||(v={}));const zt={rootMargin:"0px",threshold:0},X="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Rt="";class It{constructor(e=!0,r,o=!0){this.lazyActive=!0,this.crossOrigin=!0,this.options={loading:X,error:Rt,observerOptions:zt,log:!0,ratioCalculator:(n,s)=>s/n},this._images=new WeakMap,this.lazyActive=e,this.crossOrigin=o,this.config(r)}config(e={}){k(this.options,e),e.ratioCalculator&&(this.options.ratioCalculator=e.ratioCalculator)}mount(e,r,o){const{src:n,loading:s,error:i}=this._valueFormatter(r);e.setAttribute("lazy",v.LOADING),e.setAttribute("src",s||X),this.lazyActive?(Y||(this._setImageSrc(e,n,o,i),this._log(()=>{throw new Error("Not support IntersectionObserver!")})),this._initIntersectionObserver(e,n,o,i)):this._setImageSrc(e,n,o,i)}resize(e,r){const o=e.getAttribute("lazy"),n=e.getAttribute("src");o&&o===v.LOADED&&n&&V(n,this.crossOrigin).then(s=>{const{width:i,height:a}=s,u=e.width/i*a;e.height=u;const c=e.style;c.height=`${u}px`,r()})}unmount(e){const r=this._realObserver(e);r&&r.unobserve(e),this._images.delete(e)}_setImageSrc(e,r,o,n){!r||e.getAttribute("src")===r||V(r,this.crossOrigin).then(i=>{var h,p;const{width:a,height:u}=i,c=((p=(h=this.options).ratioCalculator)==null?void 0:p.call(h,a,u))||u/a,f=e.parentNode.parentNode;f.style.paddingBottom=`${c*100}%`,e.setAttribute("lazy",v.LOADED),e.removeAttribute("src"),e.src=i.src,o(!0)}).catch(()=>{const i=this._realObserver(e);i&&i.disconnect(),n&&(e.setAttribute("lazy",v.ERROR),e.setAttribute("src",n),o(!1)),this._log(()=>{throw new Error(`Image failed to load!And failed src was: ${r} `)})})}_isOpenLazy(){return Y&&this.lazyActive}_initIntersectionObserver(e,r,o,n){const s=this.options.observerOptions;this._images.set(e,new IntersectionObserver(a=>{Array.prototype.forEach.call(a,u=>{if(u.isIntersecting){const c=this._realObserver(e);c&&c.unobserve(u.target),this._setImageSrc(e,r,o,n)}})},s));const i=this._realObserver(e);i&&i.observe(e)}_valueFormatter(e){let r=e,o=this.options.loading,n=this.options.error;return w(e)&&(r=e.src,o=e.loading||this.options.loading,n=e.error||this.options.error),{src:r,loading:o,error:n}}_log(e){this.options.log&&e()}_realObserver(e){return this._images.get(e)}}const B=C({props:{list:{type:Array,default:()=>[]},rowKey:{type:String,default:"id"},imgSelector:{type:String,default:"src"},width:{type:Number,default:200},breakpoints:{type:Object,default:()=>({1200:{rowPerView:3},800:{rowPerView:2},500:{rowPerView:1}})},gutter:{type:Number,default:10},space:{type:Number,default:null},hasAroundGutter:{type:Boolean,default:!0},posDuration:{type:Number,default:300},animationPrefix:{type:String,default:"animate__animated"},animationEffect:{type:String,default:"fadeIn"},animationDuration:{type:Number,default:1e3},animationDelay:{type:Number,default:300},animationCancel:{type:Boolean,default:!1},backgroundColor:{type:String,default:"#fff"},lazyload:{type:Boolean,default:!0},loadProps:{type:Object,default:()=>{}},crossOrigin:{type:Boolean,default:!0},delay:{type:Number,default:300},align:{type:String,default:"center"},horizontalOrder:{type:Boolean,default:!1},heightDifference:{type:Number,default:0}},setup(t,e){const r=new It(t.lazyload,t.loadProps,t.crossOrigin);N("lazy",r);const{waterfallWrapper:o,wrapperWidth:n,colWidth:s,cols:i,offsetX:a}=dt(t),{wrapperHeight:u,layoutHandle:c}=mt(t,s,i,a,o,t.horizontalOrder,t.heightDifference),f=it(()=>{requestAnimationFrame(()=>{c().then(()=>e.emit("afterRender")),setTimeout(()=>{c()},t.posDuration+50)})},t.delay);j(()=>[n.value,s.value,t.list],()=>{n.value>0&&f()},{deep:!0});const h=y(0);return N("sizeChangeTime",h),N("imgLoaded",f),{colWidth:s,waterfallWrapper:o,wrapperHeight:u,getRenderURL:d=>vt(d,t.imgSelector)[0],getKey:(d,A)=>d[t.rowKey]||A,renderer:f}}}),q=()=>{st(t=>({"4cb83f3f":t.backgroundColor}))},J=B.setup;B.setup=J?(t,e)=>(q(),J(t,e)):q;const Ot=B,St={class:"waterfall-card"};function Nt(t,e,r,o,n,s){return E(),z("div",{ref:"waterfallWrapper",class:"waterfall-list",style:_({height:`${t.wrapperHeight}px`})},[(E(!0),z(at,null,ut(t.list,(i,a)=>(E(),z("div",{key:t.getKey(i,a),class:"waterfall-item"},[D("div",St,[L(t.$slots,"default",{item:i,index:a,url:t.getRenderURL(i)},void 0,!0),L(t.$slots,"item",{item:i,index:a,url:t.getRenderURL(i)},void 0,!0)])]))),128))],4)}var Kt=x(Ot,[["render",Nt],["__scopeId","data-v-64b9633a"]]);const Dt=C({props:{url:{type:String,default:""},title:{type:String,default:""},alt:{type:String,default:""},ratio:{type:Number,default:1}},setup(t,e){const r=P("imgLoaded"),o=P("lazy"),n=y(null);lt(()=>{s()}),ct(()=>{i()}),j(()=>t.url,(u,c)=>{s()});function s(){!n.value||o.mount(n.value,t.url,u=>{r(),u?e.emit("success",t.url):e.emit("error",t.url)})}function i(){!n.value||o.unmount(n.value)}function a(){e.emit("load",t.url)}return{lazyRef:n,imageLoad:a}}}),Ft={class:"lazy__resource"},Bt=["title","alt"];function Mt(t,e,r,o,n,s){return E(),z("div",{class:"lazy__box",style:_({paddingBottom:`${t.ratio*100}%`})},[D("div",Ft,[D("img",{ref:"lazyRef",class:"lazy__img",title:t.title,alt:t.alt,onLoad:e[0]||(e[0]=(...i)=>t.imageLoad&&t.imageLoad(...i))},null,40,Bt)])],4)}var Qt=x(Dt,[["render",Mt],["__scopeId","data-v-06fbfcdb"]]);function Ct(t=6){return Number(Math.random().toString().substr(3,t)+Date.now()).toString(36)}const jt=["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399"];function Lt(t,e){return Math.floor(Math.random()*(e-t+1))+t}function _t(){return jt[Lt(0,4)]}const Pt="https://wanderprints.com",Ut=({page:t=1,pageSize:e=20})=>{const r=`${Pt}/products.json?page=${t}&limit=${e}`;return fetch(r).then(o=>o.json()).then(o=>o.products).then(o=>o.map(n=>({id:Ct(),star:!1,price:n.variants[0].price,src:{original:Math.random()>.1?n.images[0].src:"https://www.example.com/non-existent-image.jpg"},backgroundColor:_t(),name:n.title})))};export{Qt as L,Kt as W,Wt as e,Ut as g,Ht as l};
